<main class="container-fluid">
  <div class="container">

    <h1 class="h2 d-flex justify-content-center pt-2">{{title}}</h1>
    <!-- inserção de tarefas -->

    <form [formGroup]="form" class="my-3" (ngSubmit)="add()">
      <div>
        <div class="input-group">

          <input [ngClass]="{
            'is-invalid' : form.controls['title'].touched && form.controls['title'].invalid,
            'is-valid' : form.controls['title'].touched && form.controls['title'].valid}" maxlength="50"
            formControlName="title" class="form-control" type="text" placeholder="Adicionar nova tarefa">

          <button class="btn btn-success" [disabled]='form.invalid'>
            Salvar
          </button>

          <small class="invalid-tooltip" *ngIf="form.controls['title'].touched && form.controls['title'].invalid">
            Este campo deve conter entre 4 e 60 caracteres
          </small>

          <small class="valid-tooltip" *ngIf="form.controls['title'].touched && form.controls['title'].valid">
            Isso aí!
          </small>

        </div>
      </div>
    </form>

    <!-- lista de tarefas -->
    <ul class="list-group">

      <!-- item da lista -->
      <li class="list-group-item d-flex align-items-center justify-content-between" *ngFor="let todo of todos"
        [ngClass]="{'bg-dark list-group-item-light' : todo.done == true}">

        <div [ngClass]="{'line-through' : todo.done == true}">
          {{todo.id}} - {{todo.title}}
        </div>

        <div class="btn-group">
          <button (click)="remove(todo)" class="btn btn-danger">
            Remover
          </button>

          <button (click)="markAsDone(todo)" *ngIf='!todo.done' class="btn btn-outline-success">
            Concluir
          </button>

          <button (click)="markAsUndone(todo)" *ngIf='todo.done' class="btn btn-outline-success">
            Refazer
          </button>

        </div>

      </li>


      <!-- loading -->
      <li *ngIf="todos.length == 0"
        class="list-group-item flex-column justify-content-center d-flex align-items-center">
        <small class="mb-3">Você ainda não tem tarefas adicionadas..</small>
        <div class="spinner-border" role="status">
        </div>
      </li>
      <!-- loading -->
    </ul>
  </div>

</main>
